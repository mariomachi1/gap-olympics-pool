<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAP Winter Olympics Pool 2026</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1a4d2e 0%, #2d5a3d 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #1a4d2e;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #d4af37;
            font-size: 1.2em;
            font-weight: 600;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 150px;
            padding: 15px 25px;
            background: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #1a4d2e;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .tab.active {
            background: linear-gradient(135deg, #1a4d2e 0%, #2d5a3d 100%);
            color: #d4af37;
        }

        .content-section {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            animation: fadeIn 0.3s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .player-select {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .player-select label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #1a4d2e;
            font-size: 1.1em;
        }

        .player-select select {
            width: 100%;
            padding: 12px;
            border: 2px solid #1a4d2e;
            border-radius: 8px;
            font-size: 1em;
            background: white;
        }

        .picks-summary {
            background: linear-gradient(135deg, #1a4d2e 0%, #2d5a3d 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-box {
            text-align: center;
        }

        .stat-box .number {
            font-size: 2em;
            font-weight: bold;
            color: #d4af37;
        }

        .stat-box .label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .event-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .event-card:hover {
            border-color: #1a4d2e;
            box-shadow: 0 4px 15px rgba(26, 77, 46, 0.1);
        }

        .event-card.completed {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .event-name {
            font-size: 1.2em;
            font-weight: 600;
            color: #1a4d2e;
        }

        .event-date {
            color: #666;
            font-size: 0.9em;
        }

        .country-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #1a4d2e;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            margin-top: 10px;
        }

        .country-usage {
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .usage-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }

        .usage-bar-fill {
            flex: 1;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .usage-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #d4af37 66%, #f44336 100%);
            transition: width 0.3s;
        }

        .save-button {
            background: linear-gradient(135deg, #1a4d2e 0%, #2d5a3d 100%);
            color: #d4af37;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(26, 77, 46, 0.3);
        }

        .save-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .leaderboard-table th {
            background: linear-gradient(135deg, #1a4d2e 0%, #2d5a3d 100%);
            color: #d4af37;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .leaderboard-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .leaderboard-table tr:hover {
            background: #f8f9fa;
        }

        .rank {
            font-weight: bold;
            color: #1a4d2e;
            font-size: 1.2em;
        }

        .rank.first { color: #d4af37; }
        .rank.second { color: #c0c0c0; }
        .rank.third { color: #cd7f32; }

        .points {
            font-weight: bold;
            color: #1a4d2e;
            font-size: 1.1em;
        }

        .admin-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #fff3cd;
            border-radius: 10px;
            border: 2px solid #d4af37;
        }

        .admin-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .admin-button {
            background: #1a4d2e;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .admin-button:hover {
            background: #2d5a3d;
            transform: translateY(-2px);
        }

        .admin-button.danger {
            background: #dc3545;
        }

        .admin-button.danger:hover {
            background: #c82333;
        }

        .results-entry {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .medal-select {
            padding: 10px;
            border: 2px solid #1a4d2e;
            border-radius: 8px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #1a4d2e;
            font-size: 1.2em;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                width: 100%;
            }

            .event-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .results-entry {
                grid-template-columns: 1fr;
            }

            .admin-controls {
                flex-direction: column;
            }

            .admin-button {
                width: 100%;
            }
        }

        .medal-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-left: 10px;
            vertical-align: middle;
        }

        .medal-gold { background: #d4af37; }
        .medal-silver { background: #c0c0c0; }
        .medal-bronze { background: #cd7f32; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚õ∑Ô∏è GAP Winter Olympics Pool 2026 ‚õ∑Ô∏è</h1>
            <div class="subtitle">Milano Cortina 2026 ‚Ä¢ February 6-22</div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('picks')">Make Picks</button>
            <button class="tab" onclick="switchTab('leaderboard')">Leaderboard</button>
            <button class="tab" onclick="switchTab('admin')">Admin</button>
        </div>

        <!-- PICKS TAB -->
        <div id="picks-tab" class="content-section active">
            <div class="player-select">
                <label for="player-name">Select Your Name:</label>
                <select id="player-name" onchange="loadPlayerPicks()">
                    <option value="">-- Choose your name --</option>
                </select>
            </div>

            <div id="picks-content" style="display: none;">
                <div class="picks-summary">
                    <div class="stat-box">
                        <div class="number" id="picks-made">0</div>
                        <div class="label">Picks Made</div>
                    </div>
                    <div class="stat-box">
                        <div class="number" id="total-events">0</div>
                        <div class="label">Total Events</div>
                    </div>
                    <div class="stat-box">
                        <div class="number" id="current-points">0</div>
                        <div class="label">Current Points</div>
                    </div>
                </div>

                <div id="country-usage-summary"></div>

                <div id="events-list"></div>

                <button class="save-button" onclick="savePicks()">üíæ Save My Picks</button>
            </div>
        </div>

        <!-- LEADERBOARD TAB -->
        <div id="leaderboard-tab" class="content-section">
            <h2 style="color: #1a4d2e; margin-bottom: 20px;">üèÜ Current Standings</h2>
            <div id="leaderboard-content">
                <div class="loading">Loading leaderboard...</div>
            </div>
        </div>

        <!-- ADMIN TAB -->
        <div id="admin-tab" class="content-section">
            <div class="admin-section">
                <h3 style="color: #1a4d2e; margin-bottom: 15px;">üîß Pool Controls</h3>
                <div class="admin-controls">
                    <button class="admin-button" onclick="togglePicksOpen()">
                        <span id="picks-status">Close Picks</span>
                    </button>
                    <button class="admin-button" onclick="refreshData()">Refresh Data</button>
                    <button class="admin-button danger" onclick="resetPool()">Reset All Picks</button>
                </div>
            </div>

            <div class="admin-section" style="background: #d1ecf1; border-color: #1a4d2e;">
                <h3 style="color: #1a4d2e; margin-bottom: 15px;">ü•á Enter Results</h3>
                <div id="results-events"></div>
            </div>
        </div>
    </div>

    <script>
        // Configuration - UPDATE THIS WITH YOUR GOOGLE APPS SCRIPT URL
        const SCRIPT_URL = 'YOUR_DEPLOYED_SCRIPT_URL_HERE';
        
        // ADMIN PASSWORD - CHANGE THIS TO YOUR OWN PASSWORD
        const ADMIN_PASSWORD = 'GAP2026';
        
        let currentPlayer = '';
        let adminAuthenticated = false;
        let allData = {
            events: [],
            countries: [],
            players: [],
            picks: [],
            results: [],
            settings: { picksOpen: true }
        };
        let playerPicks = {};

        // Tab switching
        function switchTab(tabName) {
            // Check if trying to access admin tab
            if (tabName === 'admin' && !adminAuthenticated) {
                const password = prompt('Enter admin password:');
                if (password !== ADMIN_PASSWORD) {
                    alert('‚ùå Incorrect password. Access denied.');
                    return;
                }
                adminAuthenticated = true;
            }
            
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
            
            if (tabName === 'leaderboard') {
                loadLeaderboard();
            } else if (tabName === 'admin') {
                loadAdminPanel();
            }
        }

        // Initialize app
        async function init() {
            try {
                const response = await fetch(SCRIPT_URL + '?action=getData');
                allData = await response.json();
                
                // Populate player dropdown
                const playerSelect = document.getElementById('player-name');
                allData.players.forEach(player => {
                    const option = document.createElement('option');
                    option.value = player;
                    option.textContent = player;
                    playerSelect.appendChild(option);
                });
                
            } catch (error) {
                console.error('Error loading data:', error);
                showError('Failed to load data. Please refresh the page.');
            }
        }

        // Load player picks
        function loadPlayerPicks() {
            const playerName = document.getElementById('player-name').value;
            if (!playerName) {
                document.getElementById('picks-content').style.display = 'none';
                return;
            }
            
            currentPlayer = playerName;
            document.getElementById('picks-content').style.display = 'block';
            
            // Load existing picks for this player
            playerPicks = {};
            allData.picks.filter(p => p.player === playerName).forEach(pick => {
                playerPicks[pick.event] = pick.country;
            });
            
            renderEvents();
            updateStats();
            updateCountryUsage();
        }

        // Render events
        function renderEvents() {
            const eventsList = document.getElementById('events-list');
            eventsList.innerHTML = '';
            
            allData.events.forEach(event => {
                const card = document.createElement('div');
                card.className = 'event-card';
                
                const result = allData.results.find(r => r.event === event.name);
                if (result) {
                    card.classList.add('completed');
                }
                
                const header = document.createElement('div');
                header.className = 'event-header';
                
                const eventName = document.createElement('div');
                eventName.className = 'event-name';
                eventName.textContent = event.name;
                
                if (result) {
                    if (result.gold) eventName.innerHTML += ` <span class="medal-indicator medal-gold" title="Gold: ${result.gold}"></span>`;
                    if (result.silver) eventName.innerHTML += ` <span class="medal-indicator medal-silver" title="Silver: ${result.silver}"></span>`;
                    if (result.bronze) eventName.innerHTML += ` <span class="medal-indicator medal-bronze" title="Bronze: ${result.bronze}"></span>`;
                }
                
                const eventDate = document.createElement('div');
                eventDate.className = 'event-date';
                eventDate.textContent = event.date || 'TBD';
                
                header.appendChild(eventName);
                header.appendChild(eventDate);
                card.appendChild(header);
                
                // Country select
                const select = document.createElement('select');
                select.className = 'country-select';
                select.disabled = !allData.settings.picksOpen || !!result;
                
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = result ? '-- Event Completed --' : '-- Select Country --';
                select.appendChild(defaultOption);
                
                allData.countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country;
                    option.textContent = country;
                    if (playerPicks[event.name] === country) {
                        option.selected = true;
                    }
                    select.appendChild(option);
                });
                
                select.onchange = function() {
                    playerPicks[event.name] = this.value;
                    updateStats();
                    updateCountryUsage();
                };
                
                card.appendChild(select);
                
                // Show result if available
                if (result) {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'country-usage';
                    resultDiv.innerHTML = `<strong>Results:</strong> ü•á ${result.gold || 'TBD'} | ü•à ${result.silver || 'TBD'} | ü•â ${result.bronze || 'TBD'}`;
                    
                    const playerCountry = playerPicks[event.name];
                    if (playerCountry) {
                        let points = 0;
                        if (playerCountry === result.gold) points = 5;
                        else if (playerCountry === result.silver) points = 3;
                        else if (playerCountry === result.bronze) points = 1;
                        
                        resultDiv.innerHTML += `<br><strong>Your pick:</strong> ${playerCountry} `;
                        if (points > 0) {
                            resultDiv.innerHTML += `<span style="color: #4caf50; font-weight: bold;">+${points} points! üéâ</span>`;
                        } else {
                            resultDiv.innerHTML += `<span style="color: #999;">No points</span>`;
                        }
                    }
                    card.appendChild(resultDiv);
                }
                
                eventsList.appendChild(card);
            });
        }

        // Update stats
        function updateStats() {
            const picksMade = Object.values(playerPicks).filter(p => p).length;
            const totalEvents = allData.events.length;
            
            document.getElementById('picks-made').textContent = picksMade;
            document.getElementById('total-events').textContent = totalEvents;
            
            // Calculate current points
            let points = 0;
            allData.results.forEach(result => {
                const playerCountry = playerPicks[result.event];
                if (playerCountry === result.gold) points += 5;
                else if (playerCountry === result.silver) points += 3;
                else if (playerCountry === result.bronze) points += 1;
            });
            document.getElementById('current-points').textContent = points;
        }

        // Update country usage
        function updateCountryUsage() {
            const usage = {};
            allData.countries.forEach(country => usage[country] = 0);
            
            Object.values(playerPicks).forEach(country => {
                if (country) usage[country]++;
            });
            
            const summary = document.getElementById('country-usage-summary');
            summary.innerHTML = '<div style="padding: 15px; background: #f8f9fa; border-radius: 10px; margin-bottom: 20px;"><strong style="color: #1a4d2e;">Country Usage (Max 3 per country):</strong><div style="margin-top: 10px;">';
            
            const sortedCountries = Object.entries(usage).sort((a, b) => b[1] - a[1]).filter(([c, count]) => count > 0);
            
            sortedCountries.forEach(([country, count]) => {
                const percentage = (count / 3) * 100;
                const color = count >= 3 ? '#f44336' : count >= 2 ? '#d4af37' : '#4caf50';
                summary.innerHTML += `
                    <div class="usage-bar">
                        <div style="min-width: 120px;"><strong>${country}:</strong></div>
                        <div class="usage-bar-fill">
                            <div class="usage-bar-inner" style="width: ${percentage}%; background: ${color};"></div>
                        </div>
                        <div style="min-width: 50px; font-weight: bold; color: ${color};">${count}/3</div>
                    </div>
                `;
            });
            
            summary.innerHTML += '</div></div>';
            
            // Disable countries at limit
            document.querySelectorAll('.country-select').forEach((select, index) => {
                const event = allData.events[index];
                const currentPick = playerPicks[event.name];
                
                Array.from(select.options).forEach(option => {
                    if (option.value && usage[option.value] >= 3 && option.value !== currentPick) {
                        option.disabled = true;
                        option.textContent = option.value + ' (Limit Reached)';
                    }
                });
            });
        }

        // Save picks
        async function savePicks() {
            if (!currentPlayer) {
                showError('Please select your name first');
                return;
            }
            
            const button = document.querySelector('.save-button');
            button.disabled = true;
            button.textContent = 'Saving...';
            
            try {
                const picks = Object.entries(playerPicks)
                    .filter(([event, country]) => country)
                    .map(([event, country]) => ({
                        player: currentPlayer,
                        event: event,
                        country: country
                    }));
                
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: 'savePicks',
                        player: currentPlayer,
                        picks: picks
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Picks saved successfully! üéâ');
                    await init(); // Refresh data
                } else {
                    showError('Failed to save picks: ' + result.error);
                }
            } catch (error) {
                showError('Error saving picks: ' + error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'üíæ Save My Picks';
            }
        }

        // Load leaderboard
        async function loadLeaderboard() {
            const content = document.getElementById('leaderboard-content');
            content.innerHTML = '<div class="loading">Loading leaderboard...</div>';
            
            try {
                const response = await fetch(SCRIPT_URL + '?action=getLeaderboard');
                const leaderboard = await response.json();
                
                let html = '<table class="leaderboard-table">';
                html += '<thead><tr><th>Rank</th><th>Player</th><th>Points</th><th>Gold</th><th>Silver</th><th>Bronze</th></tr></thead><tbody>';
                
                leaderboard.forEach((entry, index) => {
                    let rankClass = '';
                    if (index === 0) rankClass = 'first';
                    else if (index === 1) rankClass = 'second';
                    else if (index === 2) rankClass = 'third';
                    
                    html += `<tr>
                        <td><span class="rank ${rankClass}">${index + 1}</span></td>
                        <td>${entry.player}</td>
                        <td><span class="points">${entry.points}</span></td>
                        <td>ü•á ${entry.gold}</td>
                        <td>ü•à ${entry.silver}</td>
                        <td>ü•â ${entry.bronze}</td>
                    </tr>`;
                });
                
                html += '</tbody></table>';
                content.innerHTML = html;
            } catch (error) {
                content.innerHTML = '<div class="error">Failed to load leaderboard</div>';
            }
        }

        // Admin functions
        async function loadAdminPanel() {
            const resultsDiv = document.getElementById('results-events');
            resultsDiv.innerHTML = '';
            
            allData.events.forEach(event => {
                const result = allData.results.find(r => r.event === event.name) || {};
                
                const card = document.createElement('div');
                card.style.marginBottom = '20px';
                card.style.padding = '15px';
                card.style.background = 'white';
                card.style.borderRadius = '8px';
                
                card.innerHTML = `
                    <h4 style="color: #1a4d2e; margin-bottom: 10px;">${event.name}</h4>
                    <div class="results-entry">
                        <div>
                            <label>ü•á Gold:</label>
                            <select class="medal-select" id="gold-${event.name}">
                                <option value="">-- Select --</option>
                                ${allData.countries.map(c => `<option value="${c}" ${result.gold === c ? 'selected' : ''}>${c}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label>ü•à Silver:</label>
                            <select class="medal-select" id="silver-${event.name}">
                                <option value="">-- Select --</option>
                                ${allData.countries.map(c => `<option value="${c}" ${result.silver === c ? 'selected' : ''}>${c}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label>ü•â Bronze:</label>
                            <select class="medal-select" id="bronze-${event.name}">
                                <option value="">-- Select --</option>
                                ${allData.countries.map(c => `<option value="${c}" ${result.bronze === c ? 'selected' : ''}>${c}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    <button class="admin-button" style="margin-top: 10px; width: 100%;" onclick="saveResult('${event.name}')">Save Result</button>
                `;
                
                resultsDiv.appendChild(card);
            });
            
            document.getElementById('picks-status').textContent = allData.settings.picksOpen ? 'Close Picks' : 'Open Picks';
        }

        async function saveResult(eventName) {
            const gold = document.getElementById(`gold-${eventName}`).value;
            const silver = document.getElementById(`silver-${eventName}`).value;
            const bronze = document.getElementById(`bronze-${eventName}`).value;
            
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: 'saveResult',
                        event: eventName,
                        gold: gold,
                        silver: silver,
                        bronze: bronze
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    showSuccess('Result saved for ' + eventName);
                    await init();
                } else {
                    showError('Failed to save result');
                }
            } catch (error) {
                showError('Error: ' + error.message);
            }
        }

        async function togglePicksOpen() {
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: 'togglePicks'
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    await init();
                    loadAdminPanel();
                    showSuccess('Picks are now ' + (result.picksOpen ? 'OPEN' : 'CLOSED'));
                }
            } catch (error) {
                showError('Error: ' + error.message);
            }
        }

        async function refreshData() {
            showSuccess('Refreshing data...');
            await init();
            if (currentPlayer) loadPlayerPicks();
        }

        async function resetPool() {
            if (!confirm('Are you sure you want to reset ALL picks? This cannot be undone!')) {
                return;
            }
            
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: 'resetPool'
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    showSuccess('Pool has been reset');
                    await init();
                    playerPicks = {};
                    renderEvents();
                }
            } catch (error) {
                showError('Error: ' + error.message);
            }
        }

        function showError(message) {
            const div = document.createElement('div');
            div.className = 'error';
            div.textContent = message;
            document.querySelector('.container').insertBefore(div, document.querySelector('.tabs'));
            setTimeout(() => div.remove(), 5000);
        }

        function showSuccess(message) {
            const div = document.createElement('div');
            div.className = 'success';
            div.textContent = message;
            document.querySelector('.container').insertBefore(div, document.querySelector('.tabs'));
            setTimeout(() => div.remove(), 3000);
        }

        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>
